<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="vue2 -&gt; vue3 解决方案"><meta name="keywords" content="前端迭代"><meta name="author" content="沈留白"><meta name="copyright" content="沈留白"><title>vue2 -&gt; vue3 解决方案 | 沈留白の博客</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?15a2cd71aee2ddf6ffb703d39beb34be";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>var GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查询的内容:${query}"}},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"}}</script><meta name="generator" content="Hexo 4.2.1"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3-的改变"><span class="toc-number">1.</span> <span class="toc-text">vue3 的改变</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gogocode-工具第一步迁移-（gogocode）"><span class="toc-number">2.</span> <span class="toc-text">gogocode 工具第一步迁移 （gogocode）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ui-框架转换，不兼容插件转换"><span class="toc-number">3.</span> <span class="toc-text">ui 框架转换，不兼容插件转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Antdv-升级-（v1-gt-v2-v2-gt-v3）"><span class="toc-number">3.1.</span> <span class="toc-text">Antdv 升级 （v1 -&gt; v2 v2 -&gt; v3）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Antdv-1-x-转-2-x"><span class="toc-number">3.1.1.</span> <span class="toc-text">Antdv 1.x 转 2.x</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Antdv-2-x-转-3-x"><span class="toc-number">3.1.2.</span> <span class="toc-text">Antdv 2.x 转 3.x</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vue-其他插件升级"><span class="toc-number">3.1.3.</span> <span class="toc-text">vue 其他插件升级</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#部分可重用文件"><span class="toc-number">4.</span> <span class="toc-text">部分可重用文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#附录"><span class="toc-number">5.</span> <span class="toc-text">附录</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://snowysound.github.io/img/avatar.png"></div><div class="author-info__name text-center">沈留白</div><div class="author-info__description text-center"></div><div class="follow-button"><a href="https://github.com/SnowySound" target="_blank" rel="noopener">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">202</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">43</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image:url(https://my-blogimage.oss-cn-qingdao.aliyuncs.com/img/home.png)"><div id="page-header"><span class="pull-left"><a id="site-name" href="/">沈留白の博客</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"> <a class="site-page" href="/">首页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title">vue2 -&gt; vue3 解决方案</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2023-08-28</time><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">2.5k</span><span class="post-meta__separator">|</span><span>阅读时长: 10 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="vue3-的改变"><a href="#vue3-的改变" class="headerlink" title="vue3 的改变"></a>vue3 的改变</h2><p><strong>Vue.js 3 引入了更加模块化、函数式、自动化和类型化的设计理念，以提高 Vue.js 应用的可用性和可维护性</strong></p><ul><li><p>Vue.js 3 使用了基于 Proxy 的响应式系统和重写的虚拟 DOM 算法。具体来说，Vue.js 3 中使用了一个名为“模板编译器”的全新工具，它可以将 Vue.js 应用中的模板代码进行预编译，并生成可复用和高效的渲染函数。<br>在 Vue.js 3 的虚拟 DOM 中，每个组件都被表示成了一个带有标记的树形结构，其中标记指示了节点的类型和属性。在渲染过程中，Vue.js 3 使用了一种名为“静态提升”的技术，在编译时将静态内容（如文本、属性等）从动态内容（如表达式、指令等）中分离出来，并将其缓存起来，以减少运行时的计算量。<br>此外，Vue.js 3 还引入了“片段”（Fragments）的概念，可以让开发者更方便地处理多个子节点的情况。同时，Vue.js 3 的虚拟 DOM 还支持了更多的优化策略，如事件侦听器缓存、动态 class 和 style 的多级合并等，以进一步提高渲染性能。<br>总之，Vue.js 3 使用了新的虚拟 DOM 算法，可进一步提高 Vue.js 应用的性能和效率。新的虚拟 DOM 算法结合了静态提升、片段和更多的优化策略，可以更好地支持 Vue.js 应用的渲染和更新。</p></li><li><p>vue.js3 函数式组件没有状态和副作用，可以更快地渲染到 DOM 上。此外，在 Vue.js 3 中，函数式组件还支持了一些新的优化策略，如事件侦听器缓存、动态 class 和 style 的多级合并等，可以进一步提高渲染性能，其次函数式组件没有实例，并且只依赖于输入数据，因此它们在内存中的开销比普通的组件要小得多。这使得函数式组件适用于需要大量重复使用的场景，如列表渲染和动态组件等，还更容易进行单元测试，函数式组件相对于普通的组件来说，具有更好的模块化和组合性。由于函数式组件只依赖于输入数据，就可以更好地支持代码重用和逻辑复用，使得代码更加简洁和易于维护，我们可以更方便地编写测试用例，以确保组件的正确性和可靠性。</p></li><li><p>Vue.js 3 在构建工具和框架内部增加了更多的自动化机制，如编译器、优化器、渲染器等。这些自动化机制可以进一步简化开发者的工作，提高应用的性能和可靠性</p></li><li><p>Vue.js 3 改善了对 TypeScript 的支持，为各个模块提供了更完整和准确的类型定义。这使得在使用 TypeScript 开发 Vue.js 应用时，能够获得更好的开发体验和编译错误提示。</p></li></ul><h2 id="gogocode-工具第一步迁移-（gogocode）"><a href="#gogocode-工具第一步迁移-（gogocode）" class="headerlink" title="gogocode 工具第一步迁移 （gogocode）"></a>gogocode 工具第一步迁移 （<a href="https://gogocode.io/zh/docs/vue/vue2-to-vue3" target="_blank" rel="noopener">gogocode</a>）</h2><ul><li><p>清理 vue2 中无用的以及错误的 文件，处理 eslint 报错问题（如果 eslint 报错的话）</p></li><li><p>使用 gogocode 进行文件的第一步转换，等待转换成功</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局安装最新的 gogocode-cli</span></span><br><span class="line">npm install gogocode-cli -g</span><br><span class="line"><span class="comment">// 代码通过 AST 语法树转化</span></span><br><span class="line">gogocode -s ./src -t gogocode-plugin-vue -o ./src-out</span><br></pre></td></tr></table></figure></li><li><p>使用 gogocode 对于 package.json 进行初步的升级，记录升级的插件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gogocode -s package.json -t gogocode-plugin-vue -o package.json</span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用 gogocode 对于 package.json 进行初步的升级，记录升级的插件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** dependencies */</span></span><br><span class="line"></span><br><span class="line">"core-js": "^3.8.3",</span><br><span class="line">"vue": "^3.0.0",</span><br><span class="line">"vue-router": "^4.0.8",</span><br><span class="line">"vuex": "^4.0.2",</span><br><span class="line">"wangeditor": "^3.1.1",</span><br><span class="line">"tiny-emitter": "^2.1.0"</span><br><span class="line"></span><br><span class="line"><span class="comment">/** devDependencies */</span></span><br><span class="line">"@vue/cli-plugin-babel": "^5.0.1",</span><br><span class="line">"@vue/cli-service": "^5.0.1",</span><br><span class="line">"webpack-theme-color-replacer": "^1.3.12",</span><br><span class="line">"@babel/core": "^7.12.16"</span><br></pre></td></tr></table></figure></li></ul><h2 id="ui-框架转换，不兼容插件转换"><a href="#ui-框架转换，不兼容插件转换" class="headerlink" title="ui 框架转换，不兼容插件转换"></a>ui 框架转换，不兼容插件转换</h2><ul><li><p>/deep/ 转化成 :deep()</p><p><img src="https://my-blogimage.oss-cn-qingdao.aliyuncs.com/img/vscode%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE.png" alt="正则转换"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正则表达式 vscode</span></span><br><span class="line"></span><br><span class="line">/deep/(.*) \&#123;  -&gt; :deep($<span class="number">1</span>) &#123;</span><br></pre></td></tr></table></figure></li></ul><h3 id="Antdv-升级-（v1-gt-v2-v2-gt-v3）"><a href="#Antdv-升级-（v1-gt-v2-v2-gt-v3）" class="headerlink" title="Antdv 升级 （v1 -&gt; v2 v2 -&gt; v3）"></a>Antdv 升级 （<a href="https://www.antdv.com/docs/vue/migration-v2-cn" target="_blank" rel="noopener">v1 -&gt; v2</a> <a href="https://www.antdv.com/docs/vue/migration-v3-cn" target="_blank" rel="noopener">v2 -&gt; v3</a>）</h3><ul><li>将 package.json 中的有关于 ant 开头的依赖找出来，查看是否兼容 antdv 3.x 如果不兼容，升级或者是替换成兼容的格式</li></ul><h4 id="Antdv-1-x-转-2-x"><a href="#Antdv-1-x-转-2-x" class="headerlink" title="Antdv 1.x 转 2.x"></a>Antdv 1.x 转 2.x</h4><ul><li><p>移除了 LocaleProvider，请使用 ConfigProvider 替代</p></li><li><p>移除了 Tag 的 afterClose 属性</p></li><li><p>合并了 FormModel、Form, 重构 form (关注下面 <strong>FORM</strong> 部分)</p></li><li><p>tabIndex、maxLength、readOnly、autoComplete、autoFocus 更改为全小写</p></li><li><p>为了在 template 语法中更友好的使用插槽，所有涉及到 xxxRender, renderXxxx 的均改成单参数，涉及到 itemRender、renderItem、customRender、dropdownRender、dateCellRender、dateFullCellRender、monthCellRender、monthFullCellRender、renderTabBar。</p></li><li><p>xxx.sync 改成 v-model:xxx，v-model 更改成 v-model:xxx，具体涉及组件如下：<br><strong>v-model 改成 v-model:checked</strong> 的组件有: CheckableTag、Checkbox、Switch<br><strong>v-model 改成 v-model:value</strong> 的组件有: Radio、Mentions、CheckboxGroup、Rate、DatePicker、Select<br><strong>v-model 改成 v-model:visible</strong> 的组件有: Tag、Popconfirm、Popove、Tooltip、Modal、Dropdown<br><strong>modal 中的 v-model 改成 v-model:visible</strong><br><strong>v-model 改成 v-model:activeKey</strong> 的组件有: Collaps、Tabs<br><strong>v-model 改成 v-model:current</strong> 的组件有: Steps<br><strong>v-model 改成 v-model:selectedKeys</strong> 的组件有: Menu</p></li><li><p>{ on, props, attrs, … } 配置进行扁平化处理</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">props</span>: &#123;<span class="attr">type</span>: <span class="string">'xxx'</span>&#125;, <span class="attr">on</span>: &#123;<span class="attr">click</span>: <span class="keyword">this</span>.handleClick&#125;&#125; -&gt; &#123; <span class="attr">type</span>: <span class="string">'xxx'</span>, <span class="attr">onClick</span>: <span class="keyword">this</span>.handleClick &#125;</span><br></pre></td></tr></table></figure><p>涉及相关字段：okButtonProps、cancelButtonProps</p></li><li><p>图标升级: vue3 图标改成按需引入的格式（栗子）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 上下三角图标 */</span></span><br><span class="line">&lt;a-icon :type=<span class="string">"(.*) \? 'up' : 'down'"</span> /&gt;</span><br><span class="line"><span class="comment">// 转化成</span></span><br><span class="line">&lt;up-outlined v-<span class="keyword">if</span>=$<span class="number">1</span> /&gt;</span><br><span class="line">&lt;down-outlined v-<span class="keyword">if</span>=!$<span class="number">1</span>/&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**一般 outlined 类型 **/</span></span><br><span class="line"></span><br><span class="line">&lt;a-icon type=<span class="string">"(.*)"</span> (.*) /&gt;</span><br><span class="line"><span class="comment">// 转化成</span></span><br><span class="line">&lt;$<span class="number">1</span>-outlined $<span class="number">2</span> /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**一般 filled 类型 **/</span></span><br><span class="line"></span><br><span class="line">&lt;a-icon type=<span class="string">"(.*)"</span> theme=<span class="string">"filled"</span> (.*) /&gt;</span><br><span class="line"><span class="comment">// 转化成</span></span><br><span class="line">&lt;$<span class="number">1</span>-filled $<span class="number">2</span> /&gt;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 按需引入</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  MinusOutlined,</span><br><span class="line">  SearchOutlined,</span><br><span class="line">  ReloadOutlined,</span><br><span class="line">  DownloadOutlined,</span><br><span class="line">  PlusOutlined,</span><br><span class="line">  FileAddOutlined,</span><br><span class="line">  SettingFilled,</span><br><span class="line">  SoundOutlined,</span><br><span class="line">  FormOutlined,</span><br><span class="line">  CopyOutlined,</span><br><span class="line">  DeleteOutlined,</span><br><span class="line">  CloseCircleOutlined,</span><br><span class="line">  RightOutlined,</span><br><span class="line">  DingdingOutlined,</span><br><span class="line">  CheckCircleOutlined,</span><br><span class="line">  CarOutlined,</span><br><span class="line">  DoubleLeftOutlined,</span><br><span class="line">  LeftOutlined,</span><br><span class="line">  FileProtectOutlined,</span><br><span class="line">  UpOutlined,</span><br><span class="line">  DownOutlined,</span><br><span class="line">  UploadOutlined,</span><br><span class="line">  CloudDownloadOutlined,</span><br><span class="line">  ImportOutlined,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">"@ant-design/icons-vue"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> componentAIcon = <span class="function">(<span class="params">app</span>) =&gt;</span> &#123;</span><br><span class="line">  app.component(<span class="string">"MinusOutlined"</span>, MinusOutlined);</span><br><span class="line">  app.component(<span class="string">"SearchOutlined"</span>, SearchOutlined);</span><br><span class="line">  app.component(<span class="string">"ReloadOutlined"</span>, ReloadOutlined);</span><br><span class="line">  app.component(<span class="string">"DownloadOutlined"</span>, DownloadOutlined);</span><br><span class="line">  app.component(<span class="string">"PlusOutlined"</span>, PlusOutlined);</span><br><span class="line">  app.component(<span class="string">"FileAddOutlined"</span>, FileAddOutlined);</span><br><span class="line">  app.component(<span class="string">"SettingFilled"</span>, SettingFilled);</span><br><span class="line">  app.component(<span class="string">"FormOutlined"</span>, FormOutlined);</span><br><span class="line">  app.component(<span class="string">"CopyOutlined"</span>, CopyOutlined);</span><br><span class="line">  app.component(<span class="string">"DeleteOutlined"</span>, DeleteOutlined);</span><br><span class="line">  app.component(<span class="string">"CloseCircleOutlined"</span>, CloseCircleOutlined);</span><br><span class="line">  app.component(<span class="string">"RightOutlined"</span>, RightOutlined);</span><br><span class="line">  app.component(<span class="string">"DingdingOutlined"</span>, DingdingOutlined);</span><br><span class="line">  app.component(<span class="string">"CheckCircleOutlined"</span>, CheckCircleOutlined);</span><br><span class="line">  app.component(<span class="string">"CarOutlined"</span>, CarOutlined);</span><br><span class="line">  app.component(<span class="string">"DoubleLeftOutlined"</span>, DoubleLeftOutlined);</span><br><span class="line">  app.component(<span class="string">"FileProtectOutlined"</span>, FileProtectOutlined);</span><br><span class="line">  app.component(<span class="string">"UpOutlined"</span>, UpOutlined);</span><br><span class="line">  app.component(<span class="string">"DownOutlined"</span>, DownOutlined);</span><br><span class="line">  app.component(<span class="string">"UploadOutlined"</span>, UploadOutlined);</span><br><span class="line">  app.component(<span class="string">"CloudDownloadOutlined"</span>, CloudDownloadOutlined);</span><br><span class="line">  app.component(<span class="string">"SoundOutlined"</span>, SoundOutlined);</span><br><span class="line">  app.component(<span class="string">"ImportOutlined"</span>, ImportOutlined);</span><br><span class="line">  app.component(<span class="string">"LeftOutlined"</span>, LeftOutlined);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul><h4 id="Antdv-2-x-转-3-x"><a href="#Antdv-2-x-转-3-x" class="headerlink" title="Antdv 2.x 转 3.x"></a>Antdv 2.x 转 3.x</h4><p>版本重构后较大的更新有 Tree TreeSelect DatePicker TimePicker Calendar Form Table AutoComplete，其它组件也有相应功能的更新，你可以查看 ChangeLog 进一步了解详情。</p><ul><li><p>Tree TreeSelect<br>新增了虚拟滚动，废弃使用 a-tree-node a-tree-select-node 构建节点，使用 treeData 属性替代，提升组件性能。<br>废弃 scopedSlots slots 自定义渲染节点，使用 v-slot:title 替换，提升易用性，避免插槽配置膨胀，同时也避免了插槽冲突问题。<br>AutoComplete</p></li><li><p>不再支持 optionLabelProp，请直接设置 Option value 属性</p></li><li><p>Table</p><ul><li>移除了 Table 的 rowSelection.hideDefaultSelections 属性，请在 rowSelection.selections 中使用 SELECTION_ALL 和 SELECTION_INVERT 替代，自定义选择项。</li><li>移除了 Column slots，分别使用 v-slot:headerCell v-slot:bodyCell v-slot:customFilterDropdown v-slot:customFilterIcon 替换，提升易用性，避免插槽配置膨胀，同时也避免了插槽冲突问题。</li><li>新增 expandFixed 控制展开图标是否固定。</li><li>新增 showSorterTooltip 表头是否显示下一次排序的 tooltip 提示。</li><li>新增 sticky 用于设置粘性头部和滚动条。</li><li>新增 rowExpandable 用于设置是否允许行展开。</li><li>新增插槽 headerCell 用于个性化头部单元格。</li><li>新增插槽 bodyCell 用于个性化单元格。</li><li>新增插槽 customFilterDropdown 用于自定义筛选菜单，需要配合 column.customFilterDropdown 使用。</li><li>新增插槽 customFilterIcon 用于自定义筛选图标。</li><li>新增插槽 emptyText 用于自定义空数据时的显示内容。</li><li>新增插槽 summary 用于总结栏。</li></ul></li><li><p>DatePicker TimePicker Calendar</p><p>默认使用更加轻量级的 dayjs 替换 momentjs，如果你的项目过大，使用了大量的 momentjs 的方法，你可以参考文档自定义时间库，替换成 momentjs。<br>UI 交互调整，对齐 antd 4.x 交互规范</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> DatePicker <span class="keyword">from</span> <span class="string">"ant-design-vue/es/date-picker/moment"</span>;</span><br><span class="line"><span class="keyword">import</span> TimePicker <span class="keyword">from</span> <span class="string">"ant-design-vue/es/time-picker/moment"</span>;</span><br><span class="line"><span class="keyword">import</span> Calendar <span class="keyword">from</span> <span class="string">"ant-design-vue/es/calendar/moment"</span>;</span><br></pre></td></tr></table></figure></li><li><p>Button 升级</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;button icon=<span class="string">"search"</span>&gt;&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 转化成</span></span><br><span class="line"><span class="regexp">&lt;button&gt;&lt;template #icon&gt;&lt;SearchOutlined /</span>&gt;&lt;<span class="regexp">/template&gt;&lt;/</span>button&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 正则批量转化</span></span><br><span class="line">&lt;a-button (.*) icon=<span class="string">"(.)(.*?)"</span>(.*?)&gt;(.*?)&lt;<span class="regexp">/a-button&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 转化成</span></span><br><span class="line"><span class="regexp">&lt;a-button $1 $4&gt;\n&lt;template #icon&gt;&lt;\U$2$3Outlined/</span>&gt;&lt;<span class="regexp">/template&gt;\n$5\n&lt;/</span>a-button&gt;</span><br><span class="line"></span><br><span class="line">&lt;a-button (.*) icon=<span class="string">"(.)(.*?)"</span>(.*)\n(.*)&gt;(.*?)&lt;<span class="regexp">/a-button\n(.*)&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 转化成</span></span><br><span class="line"><span class="regexp">&lt;a-button $1 $4&gt;\n&lt;template #icon&gt;&lt;\U$2$3Outlined/</span>&gt;&lt;<span class="regexp">/template&gt;\n$5\n&lt;/</span>a-button&gt;</span><br></pre></td></tr></table></figure></li><li><p>Table 升级</p><ul><li><p>嵌套子 table expandedRowRender</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 嵌套子table --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">expandedRowRender</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a-table</span></span></span><br><span class="line"><span class="tag">    <span class="attr">rowKey</span>=<span class="string">"id"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:columns</span>=<span class="string">"innerColumns"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:data-source</span>=<span class="string">"text.sublistList"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:pagination</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">a-table</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>scopedSlots: { customRender: ‘keyValue’ } 转换</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正则</span></span><br><span class="line">scopedSlots: \&#123; <span class="attr">customRender</span>: (.*) \&#125; -&gt; key: $<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// a-tabe 组件内修改</span></span><br><span class="line">&lt;template #bodyCell="&#123; text, record, index, column &#125;"&gt;</span><br><span class="line">  &lt;template v-<span class="keyword">if</span>=<span class="string">"column.key === 'keyValue'"</span>&gt;</span><br><span class="line">  &lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br></pre></td></tr></table></figure></li><li><p>scopedSlots: customRender(t, record, index) 转换</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">customRender(t, record, index);</span><br><span class="line"><span class="comment">// 参数修改</span></span><br><span class="line">customRender(&#123; text, record, index, column &#125;);</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Form 升级</p><ul><li>a-form-model 弃用 统一转化成 a-form</li><li>:form -&gt; :model</li><li>form: createForm 修改成 form –&gt; 表单中提交的数据的 key</li><li>form-item 修改：v-model:value 由 a.key 改成 form.key 或 form[‘key’]</li><li>form-item 修改: v-decorator –&gt; 修改 改成 rules (&lt;a-form-item (.<em>)&gt;\n(.</em>)v-decorator=(.*) /&gt;)</li><li>添加 ref=“form” 通过 this.$refs.form 调用 form 内容</li></ul></li></ul><h4 id="vue-其他插件升级"><a href="#vue-其他插件升级" class="headerlink" title="vue 其他插件升级"></a>vue 其他插件升级</h4><ul><li><p>vue-router</p><ul><li><p>vue-router api 修改</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">"vue-router"</span>;</span><br><span class="line"><span class="keyword">import</span> routes <span class="keyword">from</span> <span class="string">"@/config/router.config"</span>;</span><br><span class="line"><span class="keyword">const</span> APP_PREFIX = localStorage.getItem(<span class="string">'APP_PREFIX'</span>) || <span class="string">''</span></span><br><span class="line"><span class="keyword">let</span> qkPath = process.env.VUE_APP_MICRO_CHILD_DEMO</span><br><span class="line"><span class="keyword">if</span> (APP_PREFIX) &#123;</span><br><span class="line">qkPath = APP_PREFIX + process.env.VUE_APP_PUBLIC_PATH</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">history: createWebHistory(<span class="built_in">window</span>.**POWERED_BY_QIANKUN** ? qkPath : process.env.VUE_APP_PUBLIC_PATH),</span><br><span class="line">routes,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure></li></ul></li><li><p>vue-router components 需要修改</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.defineAsyncComponent\((.*)\)</span><br><span class="line"><span class="comment">// 转化成</span></span><br><span class="line">$<span class="number">1</span></span><br></pre></td></tr></table></figure></li><li><p>vue-ls 替换成 @vueuse/core</p></li><li><p>store 升级</p></li><li><p>二维码功能替换 vue3-barcode</p></li><li><p>打印机效果替换 vue3-print-nb</p></li><li><p>this.$confirm =&gt; this.$modal.confirm</p></li><li><p>window.$vueApp.config.globalProperties.$modal = Modal</p></li><li><p>运行项目，单文件寻找出现的 bug 修复</p></li></ul><h2 id="部分可重用文件"><a href="#部分可重用文件" class="headerlink" title="部分可重用文件"></a>部分可重用文件</h2><ul><li><a href="https://fc-console-gen-cn-shanghai-1920452978140232.oss-cn-shanghai.aliyuncs.com/%E5%89%8D%E7%AB%AFjs%E6%96%87%E4%BB%B6%E5%A4%B9/main.js" target="_blank" rel="noopener">main.js</a></li><li><a href="https://fc-console-gen-cn-shanghai-1920452978140232.oss-cn-shanghai.aliyuncs.com/%E5%89%8D%E7%AB%AFjs%E6%96%87%E4%BB%B6%E5%A4%B9/ant-design-vue/Aicon.js" target="_blank" rel="noopener">按需引入图标</a></li><li><a href="https://fc-console-gen-cn-shanghai-1920452978140232.oss-cn-shanghai.aliyuncs.com/%E5%89%8D%E7%AB%AFjs%E6%96%87%E4%BB%B6%E5%A4%B9/ant-design-vue/ant-utils.js" target="_blank" rel="noopener">按需引入 Antdv</a></li><li><a href="https://fc-console-gen-cn-shanghai-1920452978140232.oss-cn-shanghai.aliyuncs.com/%E5%89%8D%E7%AB%AFjs%E6%96%87%E4%BB%B6%E5%A4%B9/ant-design-vue/mountElem.js" target="_blank" rel="noopener">挂载 antdv 到 app 下</a></li></ul><h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><ul><li><a href="https://blog.csdn.net/m0_52222401/article/details/131195894" target="_blank" rel="noopener">vue3 对比 vue2 的总结</a></li><li><a href="https:///www.antdv.com/docs/vue/migration-v2-cn" target="_blank" rel="noopener">v1 -&gt; v2</a></li><li><a href="https://www.antdv.com/docs/vue/migration-v3-cn" target="_blank" rel="noopener">v2 -&gt; v3</a></li><li><a href="https://gogocode.io/zh/docs/vue/vue2-to-vue3" target="_blank" rel="noopener">gogocode</a></li><li><a href="https://cn.vuejs.org/" target="_blank" rel="noopener">vue.js</a></li><li><a href="https://router.vuejs.org/zh/" target="_blank" rel="noopener">vue-router</a></li></ul></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">沈留白</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://workstudy.top/2023/08/28/vue2-vue3-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">https://workstudy.top/2023/08/28/vue2-vue3-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://workstudy.top">沈留白の博客</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF%E8%BF%AD%E4%BB%A3/">前端迭代</a></div><div class="post-qr-code"><div class="post-qr-code-item"><img class="post-qr-code__img" src="https://my-blogimage.oss-cn-qingdao.aliyuncs.com/img/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98.png"><div class="post-qr-code__desc">微信打赏我</div></div><div class="post-qr-code-item"><img class="post-qr-code__img" src="https://my-blogimage.oss-cn-qingdao.aliyuncs.com/img/%E5%BE%AE%E4%BF%A1%E6%B7%BB%E5%8A%A0%E5%A5%BD%E5%8F%8B.png"><div class="post-qr-code__desc">微信联系我</div></div></div><nav id="pagination"><div class="next-post pull-right"><a href="/2023/04/12/vue3%E8%AE%BE%E8%AE%A1%E7%90%86%E5%BF%B5/"><span>vue3设计理念</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk=new Gitalk({clientID:"86e967f96c08ba8d57e3",clientSecret:"d584b2bb75b9b78f14ffc02ce51130fae3fd6558",repo:"blogtalk",owner:"SnowySound",admin:"SnowySound",id:md5(decodeURI(location.pathname)),language:"zh-CN"});gitalk.render("gitalk-container")</script></div></div><footer class="footer-bg" style="background-image:url(https://my-blogimage.oss-cn-qingdao.aliyuncs.com/img/home.png)"><div class="layout" id="footer"><div class="copyright">&copy;2019 - 2023 By 沈留白</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="footer_custom_text"><a href="https://beian.miit.gov.cn" target="_blank" rel="noopener">鲁ICP备19020181号</a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script src="/js/search/local-search.js"></script><script>/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)&&($("#nav").addClass("is-mobile"),$("footer").addClass("is-mobile"),$("#top-container").addClass("is-mobile"))</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49b1f5">hexo-generator-search</a> <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({log:!1,pluginJsPath:"lib/",pluginModelPath:"assets/",pluginRootPath:"live2dw/",tagMode:!1})</script></body></html>